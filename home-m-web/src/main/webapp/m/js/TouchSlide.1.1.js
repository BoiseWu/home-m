/*!
 * TouchSlide v1.1
 * javascript触屏滑动特效插件，移动端滑动特效，触屏焦点图，触屏Tab切换，触屏多图切换等
 * 详尽信息请看官网：http://www.SuperSlide2.com/TouchSlide/
 *
 * Copyright 2013 大话主席
 *
 * 请尊重原创，保留头部版权
 * 在保留版权的前提下可应用于个人或商业用途

 * 1.1 宽度自适应（修复安卓横屏时滑动范围不变的bug）
 */
var TouchSlide=function(ad){var b={};ad=ad||{};var I={slideCell:ad.slideCell||"#touchSlide",titCell:ad.titCell||".hd li",mainCell:ad.mainCell||".bd",effect:ad.effect||"left",autoPlay:ad.autoPlay||false,delayTime:ad.delayTime||200,interTime:ad.interTime||2500,defaultIndex:ad.defaultIndex||0,titOnClassName:ad.titOnClassName||"on",autoPage:ad.autoPage||false,prevCell:ad.prevCell||".prev",nextCell:ad.nextCell||".next",pageStateCell:ad.pageStateCell||".pageState",pnLoop:ad.pnLoop=="undefined "?true:ad.pnLoop,startFun:ad.startFun||null,endFun:ad.endFun||null,switchLoad:ad.switchLoad||null};var h=document.getElementById(I.slideCell.replace("#",""));if(!h){return false}var e=function(ak,ag){ak=ak.split(" ");var aj=[];ag=ag||document;var ae=[ag];for(var ai in ak){if(ak[ai].length!=0){aj.push(ak[ai])}}for(var ai in aj){if(ae.length==0){return false}var al=[];for(var a in ae){if(aj[ai][0]=="#"){al.push(document.getElementById(aj[ai].replace("#","")))}else{if(aj[ai][0]=="."){var am=ae[a].getElementsByTagName("*");for(var ah=0;ah<am.length;ah++){var af=am[ah].className;if(af&&af.search(new RegExp("\\b"+aj[ai].replace(".","")+"\\b"))!=-1){al.push(am[ah])}}}else{var am=ae[a].getElementsByTagName(aj[ai]);for(var ah=0;ah<am.length;ah++){al.push(am[ah])}}}}ae=al}return ae.length==0||ae[0]==ag?false:ae};var V=function(ae,a){var i=document.createElement("div");i.innerHTML=a;i=i.children[0];var af=ae.cloneNode(true);i.appendChild(af);ae.parentNode.replaceChild(i,ae);S=af;return i};var T=function(ae,a){var i=0;if(ae.currentStyle){i=ae.currentStyle[a]}else{i=getComputedStyle(ae,false)[a]}return parseInt(i.replace("px",""))};var F=function(i,a){if(!i||!a||(i.className&&i.className.search(new RegExp("\\b"+a+"\\b"))!=-1)){return}i.className+=(i.className?" ":"")+a};var u=function(i,a){if(!i||!a||(i.className&&i.className.search(new RegExp("\\b"+a+"\\b"))==-1)){return}i.className=i.className.replace(new RegExp("\\s*\\b"+a+"\\b","g"),"")};var X,r,H,E,S,j,y,p,m;var K,x,s,U,t,g,ab,W,Y,D;var C,z,N,L,l,O,v,Q,q,w,J,B,R,d,ac;function G(){X=I.effect;r=e(I.prevCell,h)[0];H=e(I.nextCell,h)[0];E=e(I.pageStateCell)[0];S=e(I.mainCell,h)[0];if(!S){return false}j=S.children.length;y=e(I.titCell,h);p=y?y.length:j;m=I.switchLoad;K=parseInt(I.defaultIndex);x=parseInt(I.delayTime);s=parseInt(I.interTime);U=(I.autoPlay=="false"||I.autoPlay==false)?false:true;t=(I.autoPage=="false"||I.autoPage==false)?false:true;g=(I.pnLoop=="false"||I.pnLoop==false)?false:true;ab=K;W=null;Y=null;D=null;C=0;z=0;N=0;L=0;l=0;O=(/hp-tablet/gi).test(navigator.appVersion);v="ontouchstart" in window&&!O;Q=v?"touchstart":"mousedown";q=v?"touchmove":"";w=v?"touchend":"mouseup";J=0;B=S.parentNode.clientWidth;R;d;ac=j;if(p==0){p=j}if(t){p=j;y=y[0];y.innerHTML="";var ae="";if(I.autoPage==true||I.autoPage=="true"){for(var a=0;a<p;a++){ae+="<li>"+(a+1)+"</li>"}}else{for(var a=0;a<p;a++){ae+=I.autoPage.replace("$",(a+1))}}y.innerHTML=ae;y=y.children}if(X=="leftLoop"){ac+=2;S.appendChild(S.children[0].cloneNode(true));S.insertBefore(S.children[j-1].cloneNode(true),S.children[0])}R=V(S,'<div class="tempWrap" style="overflow:hidden; position:relative;"></div>');S.style.cssText="width:"+ac*B+"px;"+"position:relative;overflow:hidden;padding:0;margin:0;";for(var a=0;a<ac;a++){S.children[a].style.cssText="display:table-cell;vertical-align:top;width:"+B+"px"}}G();var aa=function(){if(typeof I.startFun=="function"){I.startFun(K,p)}};var n=function(){if(typeof I.endFun=="function"){I.endFun(K,p)}};var c=function(a){var i=(X=="leftLoop"?K+1:K)+a;var ae=function(ah){var af=S.children[ah].getElementsByTagName("img");for(var ag=0;ag<af.length;ag++){if(af[ag].getAttribute(m)){af[ag].setAttribute("src",af[ag].getAttribute(m));af[ag].removeAttribute(m)}}};ae(i);if(X=="leftLoop"){switch(i){case 0:ae(j);break;case 1:ae(j+1);break;case j:ae(0);break;case j+1:ae(1);break}}};var o=function(){B=R.clientWidth;S.style.width=ac*B+"px";for(var a=0;a<ac;a++){S.children[a].style.width=B+"px"}var ae=X=="leftLoop"?K+1:K;f(-ae*B,0)};window.addEventListener("resize",o,false);var f=function(ae,i,a){if(!!a){a=a.style}else{a=S.style}a.webkitTransitionDuration=a.MozTransitionDuration=a.msTransitionDuration=a.OTransitionDuration=a.transitionDuration=i+"ms";a.webkitTransform="translate("+ae+"px,0)"+"translateZ(0)";a.msTransform=a.MozTransform=a.OTransform="translateX("+ae+"px)"};var M=function(a){switch(X){case"left":if(K>=p){K=a?K-1:0}else{if(K<0){K=a?0:p-1}}if(m!=null){c(0)}f((-K*B),x);ab=K;break;case"leftLoop":if(m!=null){c(0)}f(-(K+1)*B,x);if(K==-1){Y=setTimeout(function(){f(-p*B,0)},x);K=p-1}else{if(K==p){Y=setTimeout(function(){f(-B,0)},x);K=0}}ab=K;break}aa();D=setTimeout(function(){n()},x);for(var ae=0;ae<p;ae++){u(y[ae],I.titOnClassName);if(ae==K){F(y[ae],I.titOnClassName)}}if(g==false){u(H,"nextStop");
u(r,"prevStop");if(K==0){F(r,"prevStop")}else{if(K==p-1){F(H,"nextStop")}}}if(E){E.innerHTML="<span>"+(K+1)+"</span>/"+p}};M();if(U){W=setInterval(function(){K++;M()},s)}if(y){for(var Z=0;Z<p;Z++){(function(){var a=Z;y[a].addEventListener("click",function(i){clearTimeout(Y);clearTimeout(D);K=a;M()})})()}}if(H){H.addEventListener("click",function(a){if(g==true||K!=p-1){clearTimeout(Y);clearTimeout(D);K++;M()}})}if(r){r.addEventListener("click",function(a){if(g==true||K!=0){clearTimeout(Y);clearTimeout(D);K--;M()}})}var k=function(i){clearTimeout(Y);clearTimeout(D);d=undefined;N=0;var a=v?i.touches[0]:i;C=a.pageX;z=a.pageY;S.addEventListener(q,A,false);S.addEventListener(w,P,false)};var A=function(i){if(v){if(i.touches.length>1||i.scale&&i.scale!==1){return}}var a=v?i.touches[0]:i;N=a.pageX-C;L=a.pageY-z;if(typeof d=="undefined"){d=!!(d||Math.abs(N)<Math.abs(L))}if(!d){i.preventDefault();if(U){clearInterval(W)}switch(X){case"left":if((K==0&&N>0)||(K>=p-1&&N<0)){N=N*0.4}f(-K*B+N,0);break;case"leftLoop":f(-(K+1)*B+N,0);break}if(m!=null&&Math.abs(N)>B/3){c(N>-0?-1:1)}}};var P=function(a){if(N==0){return}a.preventDefault();if(!d){if(Math.abs(N)>B/10){N>0?K--:K++}M(true);if(U){W=setInterval(function(){K++;M()},s)}}S.removeEventListener(q,A,false);S.removeEventListener(w,P,false)};S.addEventListener(Q,k,false);b.stopPlay=function(){clearTimeout(Y);clearTimeout(D);clearInterval(W);S.style.width="auto";S.removeEventListener(Q,k,false);S.removeEventListener(q,A,false);S.removeEventListener(w,P,false)};b.refesh=function(){K=0;setTimeout(function(){G();F(y[0],I.titOnClassName);o();W=setInterval(function(){K++;M()},s);S.addEventListener(Q,k,false)},50)};return b};